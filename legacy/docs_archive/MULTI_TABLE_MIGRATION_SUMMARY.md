# Multi-Table Migration ìš”ì•½

## ğŸ“‹ ë³€ê²½ ê°œìš”

### Before (í˜„ì¬)
```
ì„ ë°•ë‹¹ 1ê°œ í…Œì´ë¸”
â””â”€â”€ tbl_data_timeseries_{ship_id}
    â””â”€â”€ 1,037ê°œ ì»¬ëŸ¼ (created_time + 1,036 channels)
```

### After (ì‹ ê·œ)
```
ì„ ë°•ë‹¹ 3ê°œ í…Œì´ë¸”
â”œâ”€â”€ auxiliary_systems_{ship_id}        (348 ì»¬ëŸ¼)
â”œâ”€â”€ engine_generator_{ship_id}         (651 ì»¬ëŸ¼)
â””â”€â”€ navigation_ship_{ship_id}          (41 ì»¬ëŸ¼)
```

---

## ğŸ¯ ëª©í‘œ

1. **ì„±ëŠ¥ ìµœì í™”**: ì¿¼ë¦¬ ì‹œ í•„ìš”í•œ í…Œì´ë¸”ë§Œ ì ‘ê·¼
2. **ê´€ë¦¬ íš¨ìœ¨ì„±**: ì‹œìŠ¤í…œë³„ ë…ë¦½ì  ê´€ë¦¬
3. **í™•ì¥ì„±**: í…Œì´ë¸”ë³„ ìµœì í™” ì „ëµ ì ìš© ê°€ëŠ¥

---

## ğŸ“Š í…Œì´ë¸” êµ¬ì„±

| í…Œì´ë¸”ëª… | ì±„ë„ ìˆ˜ | ì£¼ìš” ì‹œìŠ¤í…œ | ë¹„ìœ¨ |
|---------|---------|------------|------|
| **auxiliary_systems** | 347ê°œ | ì¹´ê³ íƒ±í¬, APRS, ë³´ì¼ëŸ¬, ì—°ë£Œê°€ìŠ¤ì••ì¶•ê¸° | 33% |
| **engine_generator** | 650ê°œ | ì£¼ê¸°ê´€, ë°œì „ê¸° | 63% |
| **navigation_ship** | 40ê°œ | VAP, VDR, ì„ ë°•ì •ë³´ | 4% |

---

## ğŸ”§ êµ¬í˜„ ë‹¨ê³„

### Phase 1: ì¤€ë¹„ (1-2ì¼)
- [ ] `channel_router.py` - ì±„ë„ ë¼ìš°íŒ… ë¡œì§
- [ ] `multi_table_generator.py` - 3ê°œ í…Œì´ë¸” ìƒì„±

### Phase 2: ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡œì§ (2-3ì¼)
- [ ] `chunked_migration_strategy.py` ìˆ˜ì •
- [ ] `realtime_processor.py` ìˆ˜ì •

### Phase 3: í…ŒìŠ¤íŠ¸ (2-3ì¼)
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- [ ] í†µí•© í…ŒìŠ¤íŠ¸
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

### Phase 4: ë°°í¬ (1-2ì¼)
- [ ] ë°±ì—… ìƒì„±
- [ ] ë°ì´í„° ì¬ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] ì‹¤ì‹œê°„ í”„ë¡œì„¸ìŠ¤ ì „í™˜

**ì˜ˆìƒ ì†Œìš” ì‹œê°„: 1-2ì£¼**

---

## ğŸ“ˆ ì˜ˆìƒ íš¨ê³¼

### ì¿¼ë¦¬ ì„±ëŠ¥
```sql
-- Before: 1,037ê°œ ì»¬ëŸ¼ í…Œì´ë¸” ìŠ¤ìº”
SELECT created_time, me01_rpm FROM tbl_data_timeseries_imo9976903;

-- After: 651ê°œ ì»¬ëŸ¼ í…Œì´ë¸” ìŠ¤ìº” (37% ì ˆê°)
SELECT created_time, me01_rpm FROM engine_generator_imo9976903;
```

### ì´ì 
- âœ… I/O íš¨ìœ¨ì„± í–¥ìƒ (í•„ìš”í•œ ë°ì´í„°ë§Œ ì½ìŒ)
- âœ… ìºì‹œ íš¨ìœ¨ ì¦ê°€ (í…Œì´ë¸” í¬ê¸° ê°ì†Œ)
- âœ… INSERT ì„±ëŠ¥ ì•ˆì •í™” (ë³‘ë ¬ ì²˜ë¦¬)
- âœ… ìœ ì§€ë³´ìˆ˜ ìš©ì´ (ì‹œìŠ¤í…œë³„ ê´€ë¦¬)

---

## ğŸ” ì£¼ìš” íŒŒì¼

### ì„¤ì • íŒŒì¼
- `column_list_auxiliary_systems.txt` - ë³´ì¡° ì‹œìŠ¤í…œ ì±„ë„ ëª©ë¡
- `column_list_engine_generator.txt` - ì—”ì§„/ë°œì „ê¸° ì±„ë„ ëª©ë¡
- `column_list_navigation_ship.txt` - í•­í•´/ì„ ë°•ì •ë³´ ì±„ë„ ëª©ë¡

### êµ¬í˜„ íŒŒì¼
- `channel_router.py` - **ì‹ ê·œ** ì±„ë„ ë¼ìš°íŒ…
- `multi_table_generator.py` - **ì‹ ê·œ** í…Œì´ë¸” ìƒì„±
- `chunked_migration_strategy.py` - **ìˆ˜ì •** ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡œì§
- `realtime_processor.py` - **ìˆ˜ì •** ì‹¤ì‹œê°„ ì²˜ë¦¬
- `config.py` - **ìˆ˜ì •** ì„¤ì • ì¶”ê°€

---

## âš ï¸ ë¦¬ìŠ¤í¬ ë° ëŒ€ì‘

| ë¦¬ìŠ¤í¬ | ëŒ€ì‘ ë°©ì•ˆ |
|--------|-----------|
| ì±„ë„ ë¶„ë¥˜ ì˜¤ë¥˜ | ì² ì €í•œ ê²€ì¦ ë° í…ŒìŠ¤íŠ¸ |
| ë°ì´í„° ì†ì‹¤ | ë°±ì—… í•„ìˆ˜, ë‹¨ê³„ë³„ ê²€ì¦ |
| ì„±ëŠ¥ ì €í•˜ | ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ í›„ ì¡°ì • |

---

## ğŸ“š ìƒì„¸ ë¬¸ì„œ

ì „ì²´ ì„¤ê³„ì„œ: `docs/MULTI_TABLE_DESIGN.md`

